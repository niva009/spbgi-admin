import{a as i,j as e}from"./index-uYMJGzPn.js";import{a as y}from"./index-t--hEgTQ.js";const w=({next:u,update:j,data:s})=>{const[o,d]=i.useState({title:"",description:"",category_id:"",tags:"",start_date:"",end_date:"",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,...s}),[t,b]=i.useState([]),[x,n]=i.useState(!1),[m,h]=i.useState("");i.useEffect(()=>{y.get("https://admin.hpbgicancersurgerysummit2025.com/api/view-category").then(a=>{var l;return b(((l=a.data)==null?void 0:l.data)||[])}).catch(a=>console.error("Category fetch failed",a))},[]);const r=a=>{const{name:l,value:p}=a.target;d(c=>({...c,[l]:p}))},f=async a=>{var l,p,c;a.preventDefault(),h(""),n(!0);try{const v=await y.post("https://admin.hpbgicancersurgerysummit2025.com/api/createevent",o);h("🎉 Event created successfully!"),j({...o,eventId:(l=v.data)==null?void 0:l.eventId}),u&&u()}catch(v){h(((c=(p=v.response)==null?void 0:p.data)==null?void 0:c.message)||"Something went wrong!")}finally{n(!1)}};return e.jsxs("div",{className:"container mt-4 p-4 shadow-sm border rounded",children:[e.jsx("h3",{className:"mb-3",children:"Create Event"}),m&&e.jsx("div",{className:"alert alert-info",children:m}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Title *"}),e.jsx("input",{type:"text",className:"form-control",name:"title",value:o.title,onChange:r,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Description *"}),e.jsx("textarea",{className:"form-control",name:"description",rows:"4",value:o.description,onChange:r,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Category *"}),e.jsxs("select",{className:"form-select",name:"category_id",value:o.category_id,onChange:r,required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),t.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Tags (comma separated)"}),e.jsx("input",{type:"text",className:"form-control",name:"tags",value:o.tags,onChange:r,placeholder:"eg: tech, music, AI"})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{children:"Start Date *"}),e.jsx("input",{type:"datetime-local",className:"form-control",name:"start_date",value:o.start_date,onChange:r,required:!0})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{children:"End Date *"}),e.jsx("input",{type:"datetime-local",className:"form-control",name:"end_date",value:o.end_date,onChange:r,required:!0})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Timezone *"}),e.jsx("input",{type:"text",className:"form-control",name:"timezone",value:o.timezone,onChange:r,required:!0})]}),e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:x,children:x?"Creating...":"Create Event"})]})]})},q=({next:u,prev:j,data:s,eventId:o,update:d})=>{const[t,b]=i.useState({venue_name:(s==null?void 0:s.venue_name)||"",address:(s==null?void 0:s.address)||"",city:(s==null?void 0:s.city)||"",state:(s==null?void 0:s.state)||"",country:(s==null?void 0:s.country)||"",postal_code:(s==null?void 0:s.postal_code)||"",is_virtual:(s==null?void 0:s.is_virtual)||!1,virtual_link:(s==null?void 0:s.virtual_link)||""}),[x,n]=i.useState(!1),[m,h]=i.useState(""),[r,f]=i.useState(!1);console.log("event id",o);const a=p=>{const{name:c,value:v,type:g,checked:C}=p.target;b(N=>({...N,[c]:g==="checkbox"?C:v}))},l=async p=>{var c,v;p.preventDefault(),h(""),n(!0),f(!1);try{const g=await y.put(`https://admin.hpbgicancersurgerysummit2025.com/api/updateeventlocation/${o}`,t);d(t),h("✅ Location updated successfully!"),f(!0)}catch(g){h(((v=(c=g.response)==null?void 0:c.data)==null?void 0:v.message)||"Something went wrong!")}finally{n(!1)}};return e.jsxs("div",{className:"container mt-4 p-4 shadow-sm border rounded",children:[e.jsx("h4",{className:"mb-3",children:"Update Event Location"}),m&&e.jsx("div",{className:"alert alert-info",children:m}),e.jsxs("form",{onSubmit:l,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Venue Name *"}),e.jsx("input",{type:"text",className:"form-control",name:"venue_name",value:t.venue_name,onChange:a,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Address *"}),e.jsx("input",{type:"text",className:"form-control",name:"address",value:t.address,onChange:a,required:!0})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsx("label",{children:"City *"}),e.jsx("input",{type:"text",className:"form-control",name:"city",value:t.city,onChange:a,required:!0})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsx("label",{children:"State"}),e.jsx("input",{type:"text",className:"form-control",name:"state",value:t.state,onChange:a})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsx("label",{children:"Country *"}),e.jsx("input",{type:"text",className:"form-control",name:"country",value:t.country,onChange:a,required:!0})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Postal Code"}),e.jsx("input",{type:"text",className:"form-control",name:"postal_code",value:t.postal_code,onChange:a})]}),e.jsxs("div",{className:"form-check form-switch mb-3",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"is_virtual",name:"is_virtual",checked:t.is_virtual,onChange:a}),e.jsx("label",{className:"form-check-label",htmlFor:"is_virtual",children:"This is a virtual event"})]}),t.is_virtual&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Virtual Event Link *"}),e.jsx("input",{type:"url",className:"form-control",name:"virtual_link",value:t.virtual_link,onChange:a,required:!0})]}),e.jsxs("div",{className:"d-flex justify-content-between mt-4",children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:j,disabled:x,children:"⬅ Back"}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsx("button",{className:"btn btn-success",type:"submit",disabled:x,children:x?"Updating...":"Update Location"}),r&&e.jsx("button",{className:"btn btn-primary",type:"button",onClick:u,children:"Next ➡"})]})]})]})]})},E=({next:u,prev:j,data:s=[],update:o,eventId:d})=>{const[t,b]=i.useState({name:"",price:"",sale_price:"",currency:"INR",quantity:"",sales_start_date:"",sales_end_date:"",...s});if(!d)return e.jsx("div",{className:"alert alert-warning",children:"Event ID not available. Please go back and create the event first."});console.log("event id",d);const[x,n]=i.useState(""),[m,h]=i.useState(!1),r=a=>{const{name:l,value:p}=a.target;b(c=>({...c,[l]:p}))},f=async a=>{var N,S;a.preventDefault(),n("");const{name:l,price:p,currency:c,quantity:v,sales_start_date:g,sale_price:C}=t;if(!l||!p||!c||!v||!g||!C){n("⚠️ All required fields must be filled!");return}try{h(!0);const _=await y.put(`https://admin.hpbgicancersurgerysummit2025.com/api/updateticket/${d}`,t);o(t),u(),console.log("Ticket updated successfully",_.data),n("✅ Ticket updated successfully!")}catch(_){n(((S=(N=_.response)==null?void 0:N.data)==null?void 0:S.message)||"Something went wrong!")}finally{h(!1)}};return e.jsxs("div",{className:"container mt-4 p-4 shadow-sm border rounded",children:[e.jsx("h3",{className:"mb-3",children:"Ticket Details"}),x&&e.jsx("div",{className:"alert alert-info",children:x}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Name *"}),e.jsx("input",{type:"text",className:"form-control",name:"name",value:t.name,onChange:r,required:!0})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{children:"Price *"}),e.jsx("input",{type:"number",className:"form-control",name:"price",value:t.price,onChange:r,required:!0})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{children:"Sale Price *"}),e.jsx("input",{type:"number",className:"form-control",name:"sale_price",value:t.sale_price,onChange:r,required:!0})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{children:"Currency *"}),e.jsxs("select",{className:"form-select",name:"currency",value:t.currency,onChange:r,required:!0,children:[e.jsx("option",{value:"INR",children:"INR"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"})]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{children:"Quantity *"}),e.jsx("input",{type:"number",className:"form-control",name:"quantity",value:t.quantity,onChange:r,required:!0})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{children:"Sales Start Date *"}),e.jsx("input",{type:"datetime-local",className:"form-control",name:"sales_start_date",value:t.sales_start_date,onChange:r,required:!0})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{children:"Sales End Date"}),e.jsx("input",{type:"datetime-local",className:"form-control",name:"sales_end_date",value:t.sales_end_date,onChange:r})]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:j,children:"Back"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?"Saving...":"Next"})]})]})]})},D=({next:u,prev:j,eventId:s})=>{const[o,d]=i.useState(!1),[t,b]=i.useState({capacity:"",age_restriction:""}),[x,n]=i.useState(""),[m,h]=i.useState(!1),[r,f]=i.useState(null),a=async()=>{var l,p;h(!0);try{const c=new FormData;c.append("capacity",t.capacity),c.append("age_restriction",t.age_restriction),r&&c.append("event_banner",r);const v=await y.put(`https://admin.hpbgicancersurgerysummit2025.com/api/publishevent/${s}`,c,{headers:{"Content-Type":"multipart/form-data"}});n("✅ Event published successfully!"),d(!1),u()}catch(c){n(((p=(l=c.response)==null?void 0:l.data)==null?void 0:p.message)||"❌ Failed to publish"),console.error("Publish error:",c)}finally{h(!1)}};return e.jsxs("div",{className:"container mt-4 p-4 shadow-sm border rounded",children:[e.jsx("h3",{className:"mb-3",children:"Publish Event"}),x&&e.jsx("div",{className:"alert alert-info",children:x}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Capacity"}),e.jsx("input",{type:"number",className:"form-control",name:"capacity",value:t.capacity,onChange:l=>b({...t,capacity:l.target.value})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Age Restriction"}),e.jsx("input",{type:"text",className:"form-control",name:"age_restriction",value:t.age_restriction,onChange:l=>b({...t,age_restriction:l.target.value})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Event Banner (optional)"}),e.jsx("input",{type:"file",className:"form-control",onChange:l=>f(l.target.files[0])})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("button",{className:"btn btn-secondary",onClick:j,children:"Back"}),e.jsx("button",{className:"btn btn-success",onClick:()=>d(!0),disabled:m,children:m?"Publishing...":"Publish"})]}),o&&e.jsx("div",{className:"modal-backdrop fade show",style:{display:"block"},children:e.jsx("div",{className:"modal d-block",tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Confirm Publish"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(!1)})]}),e.jsx("div",{className:"modal-body",children:"Are you sure you want to publish this event? Once published, it will be live!"}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:a,children:"Yes, Publish"})]})]})})})})]})},k=["Create Event","Location Details","Ticket Details","Publish"],T=()=>{const[u,j]=i.useState(0),[s,o]=i.useState({basicInfo:{},location:{},guests:[],tickets:[]}),d=(n,m)=>{o(h=>({...h,[n]:m}))},t=()=>{u<k.length-1&&j(u+1)},b=()=>{u>0&&j(u-1)},x=()=>{switch(u){case 0:return e.jsx(w,{next:t,data:s.basicInfo,update:n=>{d("basicInfo",n)}});case 1:return e.jsx(q,{next:t,prev:b,data:s.location,eventId:s.basicInfo.eventId,update:n=>d("location",n)});case 2:return e.jsx(E,{next:t,prev:b,data:s.tickets,eventId:s.basicInfo.eventId,update:n=>d("tickets",n)});case 3:return e.jsx(D,{next:t,prev:b,data:s.tickets,eventId:s.basicInfo.eventId,update:n=>d("tickets",n)});default:return null}};return e.jsxs("div",{className:"event-stepper",children:[e.jsx("div",{className:"step-header",style:{display:"flex",gap:"10px",marginBottom:"20px"},children:k.map((n,m)=>e.jsxs("div",{style:{padding:"10px 15px",borderRadius:"5px",backgroundColor:m<=u?"#007bff":"#ccc",color:"#fff",fontWeight:"bold",cursor:"default"},children:[m<u?"✓ ":"",n]},m))}),e.jsx("div",{className:"step-body",children:x()})]})};export{T as default};
