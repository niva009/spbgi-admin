import{a as o,j as e}from"./index-uYMJGzPn.js";import{a as m}from"./index-t--hEgTQ.js";const f=()=>{const[r,h]=o.useState({name:"",metaTitle:"",metadescription:""}),[x,j]=o.useState([]),[g,n]=o.useState(""),[u,l]=o.useState(""),i=t=>{h({...r,[t.target.name]:t.target.value})},d=async()=>{try{const t=await m.get("https://admin.hpbgicancersurgerysummit2025.com/api/view-category",{headers:{Authorization:`${localStorage.getItem("token")}`}});j(t.data.data||[])}catch(t){console.error("Error fetching categories:",t)}};o.useEffect(()=>{d()},[]);const p=async t=>{var s,c;t.preventDefault(),n(""),l("");try{const a=await m.post("https://admin.hpbgicancersurgerysummit2025.com/api/add-category",r,{headers:{Authorization:`${localStorage.getItem("token")}`}});l("Category added successfully!"),h({name:"",metaTitle:"",metadescription:""}),d()}catch(a){console.error("Error adding category:",a),n(((c=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:c.message)||"Failed to add category")}},y=async t=>{var s,c;n(""),l("");try{const a=await m.delete(`https://admin.hpbgicancersurgerysummit2025.com/api/delete-category/${t}`,{headers:{Authorization:`${localStorage.getItem("token")}`}});l("Category deleted successfully!"),d()}catch(a){console.error("Error deleting category:",a),n(((c=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:c.message)||"Failed to delete category")}};return e.jsxs("div",{className:"container mt-4",children:[e.jsx("h2",{children:"Add Category"}),e.jsxs("form",{onSubmit:p,className:"mb-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Category Name"}),e.jsx("input",{type:"text",className:"form-control",name:"name",value:r.name,onChange:i,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Meta Title"}),e.jsx("input",{type:"text",className:"form-control",name:"metatitle",value:r.metatitle,onChange:i})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Meta Description"}),e.jsx("textarea",{className:"form-control",name:"metadescription",value:r.metadescription,onChange:i})]}),e.jsx("button",{type:"submit",className:"btn btn-success",children:"Add Category"})]}),g&&e.jsx("div",{className:"alert alert-danger",children:g}),u&&e.jsx("div",{className:"alert alert-success",children:u}),e.jsx("h3",{children:"All Categories"}),e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Meta Title"}),e.jsx("th",{children:"Meta Description"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:x.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:s+1}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.metatitle}),e.jsx("td",{children:t.metadescription}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-danger",onClick:()=>y(t._id),children:"Delete"})})]},t._id||s))})]})]})};export{f as default};
