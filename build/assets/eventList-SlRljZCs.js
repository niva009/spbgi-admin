import{a as i,j as t}from"./index-uYMJGzPn.js";import{a as c}from"./index-t--hEgTQ.js";const m=()=>{const[n,a]=i.useState([]),[d,l]=i.useState(!0);if(i.useEffect(()=>{(async()=>{var r;try{const s=await c.get("https://admin.hpbgicancersurgerysummit2025.com/api/showallevents");console.log("response",s),a((r=s==null?void 0:s.data)==null?void 0:r.data)}catch(s){console.error("Error fetching events:",s)}finally{l(!1)}})()},[]),d)return t.jsx("div",{children:"Loading..."});const o=async e=>{try{const r=await c.delete(`https://admin.hpbgicancersurgerysummit2025.com/api/deleteevent/${e}`);console.log("Event deleted successfully",r.data),a(n.filter(s=>s.id!==e))}catch(r){console.error("Error deleting event:",r)}};return t.jsxs("div",{children:[t.jsx("h1",{style:{display:"flex",justifyContent:"center",alignContent:"center",marginBottom:"20px"},children:"Registered Events"}),t.jsxs("table",{className:"table table-striped",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"no"}),t.jsx("th",{children:"Title"}),t.jsx("th",{children:"Category"}),t.jsx("th",{children:"Start Date"}),t.jsx("th",{children:"End Date"}),t.jsx("th",{children:"ticket price"}),t.jsx("th",{children:"Status"}),t.jsx("th",{children:"Action"})]})}),t.jsx("tbody",{children:n.map((e,r)=>{var s;return t.jsxs("tr",{children:[t.jsx("td",{children:r+1}),t.jsx("td",{children:e.title}),t.jsx("td",{children:e.category}),t.jsx("td",{children:new Date(e.start_date).toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}),t.jsx("td",{children:new Date(e.end_date).toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}),t.jsx("td",{children:(s=e==null?void 0:e.tickets)==null?void 0:s.sale_price}),t.jsx("td",{style:{color:e.status==="published"?"green":"red",fontWeight:"bold"},children:e.status}),t.jsx("button",{className:"btn btn-primary",style:{marginLeft:"10px"},onClick:()=>window.location.href=`/event/${e.id}`,children:"View"}),t.jsx("button",{className:"btn btn-danger",style:{marginLeft:"10px"},onClick:()=>o(e._id),children:"Delete"})]},e.id??`event-${r}`)})})]})]})};export{m as default};
